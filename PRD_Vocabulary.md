# Product Requirements Document (PRD)
## 어휘 문제 자동 생성 시스템

### 1. 개요 (Overview)

**제품명**: 어휘 문제 AI 생성 시스템

**목적**: 영어 교사가 자연어로 입력한 어휘 문제 생성 지침을 LLM이 분석하여 구조화된 검색 조건으로 변환하고, 구글 시트의 어휘 마스터 테이블에서 적합한 어휘를 자동으로 검색하여 문제를 생성

**대상 사용자**: 중·고등학교 영어 교사, 학원 강사, 교재 개발자, 학부모

---

### 2. 배경 및 문제 정의 (Background & Problem Statement)

**현재 문제점**:
- 교사들이 어휘 시험 문제를 출제할 때 적절한 난이도와 주제의 어휘를 선별하는 데 많은 시간 소요
- 학생 수준에 맞는 어휘를 체계적으로 관리하고 선택하기 어려움
- 다양한 유형의 어휘 문제(객관식, 빈칸, 영영풀이, 동의어/반의어 등)를 효율적으로 생성하기 어려움
- 어휘 데이터베이스를 검색하고 필터링하는 수동 작업의 비효율성

**해결 방안**:
LLM을 활용하여 자연어 지침을 분석하고, 구조화된 검색으로 어휘를 추출하여 자동으로 문제 생성

---

### 3. 목표 및 성공 지표 (Goals & Success Metrics)

**핵심 목표**:
1. 자연어 입력을 통한 직관적인 어휘 문제 생성 경험 제공
2. 문제 생성 정확도 95% 이상 달성
3. 문제 제작 시간 85% 단축 (기존 수동 제작 대비)

**성공 지표**:
- 사용자 만족도 4.6/5.0 이상
- 평균 문제 생성 완료 시간 20초 이내
- 재생성률 15% 이하
- 주간 활성 사용자 증가율
- 생성된 문제의 교육적 품질 평가 점수

---

### 4. 기능 요구사항 (Functional Requirements)

#### 4.1 핵심 기능

**F1. 자연어 입력 인터페이스**
- 교사가 자연어로 어휘 문제 생성 지침 입력
- 예시: "중학교 2학년 수준의 동물 관련 어휘 20개로 객관식 문제 만들어줘"
- 예시: "CEFR B1 레벨의 감정 표현 어휘로 빈칸 채우기 10문제"
- 다국어 지원 (한국어, 영어)

**F2. LLM 기반 요소 추출**
- 입력된 자연어를 분석하여 다음 요소 추출:
  - 어휘 수준 (초등/중등/고등, CEFR 레벨, 수능 필수 어휘 등)
  - 주제/카테고리 (일상생활, 학교, 감정, 과학, 사회 등)
  - 품사 (명사, 동사, 형용사, 부사, 전치사 등)
  - 난이도 (쉬움/보통/어려움, 빈도수 기준)
  - 문제 유형 (객관식, 빈칸 채우기, 영영풀이, 동의어/반의어, 문장 완성 등)
  - 어휘 개수
  - 특정 어휘 포함/제외 조건
  - 철자 길이
  - 접두사/접미사 조건

**F3. JSON 스키마 생성**
```json
{
  "vocabulary_level": "중학교 2학년",
  "cefr_level": "A2",
  "topic": "동물",
  "part_of_speech": ["명사"],
  "difficulty": "보통",
  "frequency_range": [1000, 3000],
  "problem_type": "객관식",
  "count": 20,
  "include_words": [],
  "exclude_words": [],
  "word_length_min": null,
  "word_length_max": null,
  "prefix_suffix": null,
  "additional_filters": {}
}
```

**F4. 구글 시트 연동 및 검색**
- Google Sheets API를 통한 어휘 마스터 테이블 접근
- JSON 조건에 맞는 필터링 수행
- 결과 어휘 데이터 반환

**F5. 문제 자동 생성**
- 검색된 어휘를 기반으로 문제 유형별 자동 생성
  - **객관식**: 단어 뜻 맞히기, 문장 속 적절한 어휘 선택
  - **빈칸 채우기**: 문맥에 맞는 어휘 삽입
  - **영영풀이**: 영어 정의를 보고 단어 찾기
  - **동의어/반의어**: 유의어 또는 반대말 찾기
  - **문장 완성**: 어휘를 활용한 문장 만들기
  - **철자 맞추기**: 일부 철자를 보고 단어 완성
- 오답 선택지 자동 생성 (유사 난이도, 유사 주제의 어휘)

**F6. 문제 결과 표시 및 편집**
- 생성된 문제 목록 표시
- 문제별 미리보기 기능
- 개별 문제 수정 및 삭제
- 문제 순서 재배치
- 정답 및 해설 표시/숨김

**F7. 결과 내보내기**
- 다양한 형식으로 내보내기 (PDF, Word, Excel, Google Docs)
- 학생용 / 교사용 (정답 포함) 버전 선택
- 인쇄 최적화 레이아웃

#### 4.2 부가 기능

**F8. 문제 템플릿 관리**
- 자주 사용하는 문제 생성 조건 템플릿 저장
- 템플릿 카테고리 분류 (학년별, 주제별, 시험 유형별)
- 템플릿 공유 기능

**F9. 어휘 학습 추적**
- 생성된 문제의 어휘 목록 저장
- 학생별 학습 이력 관리
- 복습 일정 제안

**F10. 어휘 통계 및 분석**
- 어휘 사용 빈도 분석
- 학생 성취도에 따른 어휘 추천
- 어휘 마스터 테이블 통계 대시보드

**F11. 배치 생성**
- 여러 조건을 한 번에 입력하여 다양한 문제 세트 생성
- 학급별, 수준별 맞춤 문제지 일괄 생성

---

### 5. 비기능 요구사항 (Non-Functional Requirements)

**성능**:
- LLM 응답 시간: 2초 이내
- 어휘 검색 시간: 1초 이내
- 문제 생성 시간: 5초 이내 (20문제 기준)
- 전체 프로세스 완료: 10초 이내

**확장성**:
- 50,000개 이상의 어휘 데이터 처리 가능
- 동시 사용자 200명 지원
- 일일 10,000건 이상의 문제 생성 처리

**보안**:
- 구글 시트 접근 권한 관리
- 사용자 인증 (Google OAuth 2.0)
- 개인정보 보호 (학생 데이터 암호화)
- 데이터 전송 암호화 (HTTPS)

**사용성**:
- 모바일 친화적 UI/UX
- 태블릿 최적화
- 접근성 표준 준수 (WCAG 2.1 AA)
- 다크 모드 지원

**신뢰성**:
- 시스템 가용성 99.7% 이상
- 에러 발생 시 명확한 피드백 및 대안 제시
- 자동 저장 기능
- 데이터 백업 (일일)

---

### 6. 기술 스택 (Tech Stack)

**프론트엔드**:
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS + Shadcn/ui
- React Query (데이터 페칭)
- Zustand (상태 관리)

**백엔드**:
- Python (FastAPI) 또는 Node.js (Express)
- LLM API: Anthropic Claude 3.5 Sonnet 또는 OpenAI GPT-4
- 문제 생성 엔진 (커스텀 로직)

**데이터베이스 및 저장소**:
- Google Sheets API (어휘 마스터 테이블)
- Supabase 또는 Firebase (사용자 데이터, 문제 히스토리, 템플릿)
- Redis (캐싱)

**인프라**:
- Vercel (프론트엔드)
- Railway 또는 Fly.io (백엔드)
- CI/CD: GitHub Actions

**인증 및 보안**:
- Google OAuth 2.0
- NextAuth.js
- JWT

**문서 생성**:
- jsPDF (PDF 생성)
- docx (Word 문서 생성)
- ExcelJS (Excel 생성)

---

### 7. 데이터 모델 (Data Model)

#### 7.1 구글 시트 어휘 마스터 테이블 스키마

| 컬럼명 | 데이터 타입 | 설명 |
|--------|------------|------|
| word_id | String | 어휘 고유 ID |
| word | String | 영어 단어 |
| korean_meaning | String | 한국어 뜻 |
| part_of_speech | String | 품사 (noun, verb, adjective, adverb, etc.) |
| level | String | 학년 수준 (초등/중1/중2/중3/고1/고2/고3) |
| cefr_level | String | CEFR 레벨 (A1, A2, B1, B2, C1, C2) |
| frequency_rank | Integer | 빈도 순위 (1~10000) |
| topic | String | 주제/카테고리 |
| difficulty | String | 난이도 (쉬움/보통/어려움) |
| english_definition | Text | 영영 풀이 |
| synonyms | Array | 동의어 리스트 |
| antonyms | Array | 반의어 리스트 |
| example_sentence | Text | 예문 |
| example_korean | Text | 예문 한국어 번역 |
| pronunciation | String | 발음 기호 |
| word_family | Array | 파생어/관련어 |
| prefix_suffix | String | 접두사/접미사 |
| word_length | Integer | 철자 길이 |
| oxford_3000 | Boolean | Oxford 3000 포함 여부 |
| oxford_5000 | Boolean | Oxford 5000 포함 여부 |
| toefl_word | Boolean | TOEFL 필수 어휘 여부 |
| toeic_word | Boolean | TOEIC 필수 어휘 여부 |
| sat_word | Boolean | SAT 필수 어휘 여부 |
| image_url | String | 이미지 URL (선택) |
| audio_url | String | 발음 오디오 URL (선택) |
| notes | Text | 추가 메모 |
| created_at | Timestamp | 생성일 |
| updated_at | Timestamp | 수정일 |

#### 7.2 검색 요청 JSON 스키마

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "vocabulary_level": {
      "type": "string",
      "enum": ["초등", "중1", "중2", "중3", "고1", "고2", "고3"]
    },
    "cefr_level": {
      "type": "string",
      "enum": ["A1", "A2", "B1", "B2", "C1", "C2"]
    },
    "topic": {"type": "string"},
    "part_of_speech": {
      "type": "array",
      "items": {"type": "string"}
    },
    "difficulty": {
      "type": "string",
      "enum": ["쉬움", "보통", "어려움"]
    },
    "frequency_range": {
      "type": "object",
      "properties": {
        "min": {"type": "integer"},
        "max": {"type": "integer"}
      }
    },
    "problem_type": {
      "type": "string",
      "enum": ["객관식", "빈칸채우기", "영영풀이", "동의어", "반의어", "문장완성", "철자맞추기"]
    },
    "count": {"type": "integer"},
    "include_words": {
      "type": "array",
      "items": {"type": "string"}
    },
    "exclude_words": {
      "type": "array",
      "items": {"type": "string"}
    },
    "word_length": {
      "type": "object",
      "properties": {
        "min": {"type": "integer"},
        "max": {"type": "integer"}
      }
    },
    "oxford_3000_only": {"type": "boolean"},
    "oxford_5000_only": {"type": "boolean"},
    "sort_by": {"type": "string"},
    "sort_order": {"type": "string", "enum": ["asc", "desc"]}
  }
}
```

#### 7.3 생성된 문제 데이터 스키마

```json
{
  "problem_id": "string",
  "problem_type": "string",
  "vocabulary": {
    "word": "string",
    "korean_meaning": "string",
    "part_of_speech": "string"
  },
  "question": "string",
  "choices": ["string", "string", "string", "string"],
  "correct_answer": "string",
  "explanation": "string",
  "difficulty": "string",
  "created_at": "timestamp"
}
```

---

### 8. 사용자 스토리 (User Stories)

**US-1**: 교사로서, "중학교 1학년 수준의 일상생활 어휘 30개로 객관식 문제 만들어줘"라고 입력하면 자동으로 문제가 생성되길 원한다.

**US-2**: 교사로서, 생성된 문제를 미리보기하고 마음에 들지 않는 문제는 수정하거나 재생성할 수 있기를 원한다.

**US-3**: 교사로서, 자주 사용하는 문제 생성 조건을 템플릿으로 저장하여 재사용하고 싶다.

**US-4**: 교사로서, 생성된 문제를 PDF나 Word로 다운로드하여 인쇄하거나 온라인으로 공유하고 싶다.

**US-5**: 학원 강사로서, 학생별 수준에 맞는 맞춤형 어휘 문제를 빠르게 생성하고 싶다.

**US-6**: 교사로서, 이전에 출제했던 어휘를 제외하고 새로운 어휘로 문제를 만들고 싶다.

**US-7**: 교재 개발자로서, 특정 CEFR 레벨과 주제에 맞는 대량의 어휘 문제를 일괄 생성하고 싶다.

---

### 9. 워크플로우 (Workflow)

```
[사용자 입력]
    ↓
[자연어 텍스트: "중2 수준 동물 어휘 20개 객관식"]
    ↓
[LLM 분석 및 요소 추출]
    ↓
[JSON 검색 조건 생성]
    ↓
[사용자 확인 및 수정 (선택)]
    ↓
[Google Sheets API 호출]
    ↓
[어휘 필터링 및 검색]
    ↓
[어휘 데이터 반환]
    ↓
[문제 자동 생성 엔진]
  - 문제 유형별 템플릿 적용
  - 오답 선택지 생성
  - 예문 및 문맥 생성
    ↓
[생성된 문제 표시]
    ↓
[사용자 검토 및 편집]
    ↓
[최종 문제 확정]
    ↓
[내보내기 (PDF/Word/Excel)]
```

---

### 10. UI/UX 요구사항

**주요 화면**:

1. **홈/대시보드 화면**
   - 빠른 문제 생성 입력창
   - 최근 생성한 문제 목록
   - 저장된 템플릿 바로가기
   - 어휘 통계 요약

2. **문제 생성 입력 화면**
   - 대형 자연어 입력 텍스트 박스
   - 예시 프롬프트 제공 (카테고리별)
   - 음성 입력 지원
   - 고급 옵션 토글 (JSON 직접 수정)

3. **검색 조건 확인/수정 화면**
   - 추출된 JSON 조건 시각화 (카드 형식)
   - 각 조건별 수정 가능한 폼
   - 실시간 어휘 매칭 개수 표시

4. **문제 생성 결과 화면**
   - 생성된 문제 목록 (카드 또는 리스트 뷰)
   - 문제 유형별 필터
   - 개별 문제 편집 모드
   - 드래그 앤 드롭으로 순서 변경
   - 일괄 선택/해제

5. **문제 미리보기/편집 화면**
   - 학생 화면 미리보기
   - 문제, 선택지, 정답, 해설 편집
   - 문제 재생성 버튼
   - 이전/다음 문제 네비게이션

6. **내보내기 화면**
   - 형식 선택 (PDF/Word/Excel/Google Docs)
   - 레이아웃 옵션 (1단/2단, 폰트 크기)
   - 정답지 포함 여부
   - 학생 정보 입력란 추가 여부

7. **템플릿 관리 화면**
   - 저장된 템플릿 목록
   - 템플릿 카테고리 관리
   - 템플릿 공유 및 가져오기

8. **어휘 마스터 테이블 관리 화면**
   - 어휘 검색 및 필터링
   - 어휘 추가/수정/삭제
   - 일괄 업로드 (CSV/Excel)
   - 어휘 통계 대시보드

---

### 11. 문제 유형별 생성 로직

#### 11.1 객관식 (뜻 맞히기)

**문제 형식**:
```
다음 단어의 의미로 가장 적절한 것은?

elephant

① 곰
② 코끼리
③ 사자
④ 호랑이
```

**생성 로직**:
1. 타겟 어휘 선택
2. 정답: 타겟 어휘의 한국어 뜻
3. 오답: 동일 주제의 유사 난이도 어휘 3개

#### 11.2 빈칸 채우기

**문제 형식**:
```
다음 빈칸에 들어갈 가장 적절한 단어는?

I saw a big _______ at the zoo yesterday.

① elephant
② building
③ mountain
④ ocean
```

**생성 로직**:
1. 타겟 어휘의 예문에서 어휘 부분을 빈칸으로 변경
2. 정답: 타겟 어휘
3. 오답: 문법적으로 가능하나 문맥상 부적절한 어휘 3개

#### 11.3 영영풀이

**문제 형식**:
```
다음 영어 정의에 해당하는 단어는?

"A very large gray animal with big ears and a long nose called a trunk"

① elephant
② dinosaur
③ whale
④ giraffe
```

**생성 로직**:
1. 타겟 어휘의 영영 정의 사용
2. 정답: 타겟 어휘
3. 오답: 유사한 특징을 가진 어휘 3개

#### 11.4 동의어/반의어

**문제 형식**:
```
다음 단어와 의미가 가장 유사한(반대되는) 것은?

happy

① sad (반의어 문제의 경우 정답)
② joyful (동의어 문제의 경우 정답)
③ angry
④ tired
```

**생성 로직**:
1. 타겟 어휘 선택
2. 정답: 데이터베이스의 동의어/반의어 필드에서 선택
3. 오답: 유사 품사의 다른 감정/상태 어휘

---

### 12. 개발 단계 (Development Phases)

**Phase 1: MVP (5주)**
- 기본 자연어 입력 인터페이스
- LLM 통합 및 요소 추출
- 구글 시트 연동 및 어휘 검색
- 객관식 문제 자동 생성 (단순 뜻 맞히기)
- 기본 문제 표시 및 PDF 내보내기

**Phase 2: 핵심 기능 강화 (5주)**
- 다양한 문제 유형 생성 (빈칸, 영영풀이, 동의어/반의어)
- 문제 편집 및 재생성 기능
- 검색 조건 수정 인터페이스
- Word, Excel 내보내기
- 사용자 인증 및 데이터 저장

**Phase 3: 고급 기능 (4주)**
- 템플릿 관리 시스템
- 배치 생성 기능
- 어휘 학습 추적
- 어휘 마스터 테이블 관리 UI
- 문제 품질 검증 로직

**Phase 4: 완성 및 최적화 (3주)**
- 성능 최적화 및 캐싱
- 모바일 최적화
- 사용자 테스트 및 피드백 반영
- 통계 및 분석 대시보드
- 문서화 및 튜토리얼

**Phase 5: 배포 및 운영 (1주)**
- 프로덕션 배포
- 모니터링 설정
- 사용자 가이드 제작
- 마케팅 자료 준비

---

### 13. 리스크 및 대응 방안 (Risks & Mitigation)

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|----------|
| LLM 요소 추출 정확도 부족 | 높음 | 프롬프트 엔지니어링, Few-shot 학습, 검색 조건 수정 UI 제공 |
| 오답 선택지 품질 저하 | 높음 | 오답 생성 알고리즘 정교화, 교사 피드백 학습, 수동 수정 기능 |
| 어휘 마스터 테이블 데이터 품질 | 중간 | 데이터 검증 로직, 관리자 검토 프로세스, 크라우드소싱 |
| 구글 시트 API 성능 제한 | 중간 | 캐싱 전략, 데이터베이스 이관, API 할당량 최적화 |
| 다양한 문제 유형 생성의 복잡성 | 중간 | 단계적 개발, 유형별 전문 템플릿, 규칙 기반 + AI 하이브리드 |
| 저작권 및 라이선스 문제 | 낮음 | 공개 어휘 소스 사용, 저작권 표기, 법적 검토 |

---

### 14. 데이터 소스 및 어휘 마스터 테이블 구축

**어휘 데이터 소스**:
- Oxford 3000 / 5000
- CEFR Vocabulary Lists
- 교육부 권장 어휘 목록
- TOEFL, TOEIC, SAT 필수 어휘
- 교과서 어휘 (출판사별)
- 수능 기출 어휘

**데이터 수집 및 정제 프로세스**:
1. 공개 어휘 데이터 수집
2. 중복 제거 및 표준화
3. 난이도 및 레벨 자동 분류 (빈도수 기반)
4. 영영 정의, 예문 생성 (LLM 활용)
5. 동의어/반의어 자동 매칭
6. 교사 검토 및 수정

---

### 15. 향후 확장 계획 (Future Enhancements)

**단기 (3-6개월)**:
- 문장 작문 문제 생성
- 콜로케이션(연어) 문제 생성
- 어휘 발음 문제 (발음 기호 또는 음성)
- 모바일 앱 개발

**중기 (6-12개월)**:
- AI 기반 난이도 자동 조정
- 학생 성취도 기반 맞춤형 문제 추천
- 게임화 요소 (퀴즈 모드, 점수, 배지)
- 다른 언어 지원 (일본어, 중국어, 스페인어)

**장기 (12개월+)**:
- 어휘 학습 앱과 연동
- 음성 인식 기반 발음 평가
- AR/VR 어휘 학습 콘텐츠 생성
- 기업용 비즈니스 영어 어휘 버전

---

### 16. 성공 사례 시나리오

**시나리오 1: 중학교 영어 교사**
선생님이 "중2 1학기 기말고사 범위 어휘로 20문제 만들어줘"라고 입력하면:
1. 시스템이 중2 수준, 1학기 교과서 범위의 어휘 추출
2. 다양한 유형의 문제 20개 자동 생성
3. 선생님이 3개 문제 수정 후 PDF 다운로드
4. 총 소요 시간: 5분 (기존 1시간 → 92% 단축)

**시나리오 2: 학원 강사**
강사가 템플릿 "TOEFL 필수 어휘 일일 테스트"를 선택:
1. 저장된 조건(TOEFL 어휘 50개, 빈칸/영영풀이 혼합)으로 즉시 생성
2. 학생별로 다른 문제 세트 5개 일괄 생성
3. 각 학생에게 이메일 자동 발송
4. 총 소요 시간: 2분 (기존 30분 → 93% 단축)

---

### 17. 비용 추정 (Cost Estimation)

**월간 운영 비용 (100명 활성 사용자 기준)**:
- Vercel Hosting: $20
- Backend Hosting (Railway): $15
- LLM API 비용 (Claude/GPT): $100-200
- Google Sheets API: 무료 (할당량 내)
- Supabase/Firebase: $25
- 도메인 및 기타: $10
- **총계**: 약 $170-270/월

**사용자당 비용**: 약 $1.7-2.7/월

---

### 18. 참고 자료 (References)

- Google Sheets API Documentation
- Anthropic Claude API / OpenAI API Documentation
- CEFR Vocabulary Framework
- Oxford 3000/5000 Word Lists
- 교육부 영어 교육과정 및 성취기준
- EFL/ESL 어휘 교육 연구 자료

---

### 19. 부록: 샘플 자연어 입력 및 JSON 변환

**예시 1**:
- 입력: "고등학교 1학년 수준의 과학 관련 명사 15개로 빈칸 채우기 문제 만들어줘"
- JSON:
```json
{
  "vocabulary_level": "고1",
  "cefr_level": "B1",
  "topic": "과학",
  "part_of_speech": ["명사"],
  "problem_type": "빈칸채우기",
  "count": 15
}
```

**예시 2**:
- 입력: "Oxford 3000 중에서 감정 표현하는 형용사로 동의어 문제 10개"
- JSON:
```json
{
  "oxford_3000_only": true,
  "topic": "감정",
  "part_of_speech": ["형용사"],
  "problem_type": "동의어",
  "count": 10
}
```

**예시 3**:
- 입력: "CEFR A2 레�el 일상생활 어휘 중에서 'go'랑 'come'은 빼고 객관식 20문제"
- JSON:
```json
{
  "cefr_level": "A2",
  "topic": "일상생활",
  "problem_type": "객관식",
  "count": 20,
  "exclude_words": ["go", "come"]
}
```

---

## 결론

본 시스템은 교사들의 어휘 문제 제작 시간을 획기적으로 단축하고, 학생 수준에 맞는 맞춤형 문제를 효율적으로 생성할 수 있도록 지원합니다. LLM 기술과 구조화된 어휘 데이터베이스를 결합하여 높은 품질의 문제를 자동 생성하며, 직관적인 UI/UX를 통해 누구나 쉽게 사용할 수 있습니다.
